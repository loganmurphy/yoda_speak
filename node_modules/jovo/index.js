#!/usr/bin/env node
var download = require('download-github-repo');
var ora = require('ora');
var exec = require('child_process').exec;
const downloadSpinner = ora('Downloading project files');
const installSpinner = ora('Installing dependencies'); 

console.log('I\'m setting everything up');

if(process.argv[2] === 'new') {
	
        let folder = process.argv[3];
	downloadSpinner.start();
	download('jovotech/jovo-sample-voice-app-nodejs', folder, function(err) {
        if(!err) {
	  downloadSpinner.succeed('Download successful');
	  
	  installSpinner.start();
	  child = exec('npm install', {
		cwd: folder }
		,
		function(error, stdout, stderr) {
		installSpinner.succeed('Installation successful');
		console.log();
		console.log('You\'re all set.');
		console.log('Type "node '+folder+'/index.js" to start the server');
	  });
	}
	});
}

